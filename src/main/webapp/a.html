<html>
<head>
	<title></title>
	<script src="echarts.min.js"></script>
</head>
<body>
<div id="main" style="width: 1000px;height:800px;margin:0 auto;"></div>

<script type="text/javascript">
var data={
	"resDataMap":
	{
		"Yi":{"data":[314.0,473.0,563.0,747.0,856.0,943.0,1308.0,1871.0,2265.0,3038.0],
		      "max": 3038,
		      "min": 314,
		      "mean": 1237.8},
		"Xi":{"data":[308.0,443.0,432.0,572.0,603.0,624.0,989.0,1164.0,1208.0,1764.0],
	      "max": 1764,
	      "min": 308,
	      "mean": 810.7}
	},
	"independentVariable":
		[
			{
				"position":"B1",
				"typeDes":null,
				"type":null,
				"typeFormat":null,
				"varietyName":"Xi",
				"range":"B2:B11"
			}
		],
	"dependentVariable":
	{
		"position":"A1",
		"typeDes":null,
		"type":null,
		"typeFormat":null,
		"varietyName":"Yi",
		"range":"A2:A11"
	}
}
var opt={
	"ret_code": "",
	"ret_msg": "这是一张散点图的标题",//标题先放在这边
	"ret_err": "",
	"n": 10,
	"slope": 0.5111229160623828,
	"slopeStdErr": 0.027508114139822928,
	"regressionSumSquares": 1846745.5681949866,
	"sumSquaredErrors": 42792.531805014005,
	"r": 0.9886116092906885,
	"meanSquareError": 5349.066475626751,
	"intercept": 178.0320544979826,
	"significance": 7.259053047548036E-8,
	"slopeConfidenceInterval": 0.06343382495810089,
	"regressionParameters": [178.0320544979826,
	0.5111229160623828],
	"regressionParametersStandardErrors": [41.16160920729023,
	0.027508114139822928],
	"adjustedRSquared": 0.9745220282773653,
	"predict": [178.0320544979826,
	178.543177414045],
	"ttests": [4.325196655976485,
	18.580805411245578],
	"f": 345.2463297305728,
	"rsquare": 0.9773529140243248, 
	"xsumSquares": 7068973.6
	
}
</script>
<script type="text/javascript">

//打印散点图
var Scatter={
	data:null,//散点json
	opt:null,//配置json
	content:"",//散点图容器的id

	init:function (data,opt,content) {
		//init数据
		this.data=data;
		this.opt=opt;
		this.content=content;

		//转换格式
		var depend=this.data.dependentVariable.varietyName,

			//TODO 这里暂时先写为一个因变量的情况
			dataAll=[];
		var depmax,depmin,indmax,indmin;
		
		var	independentList =[];
		for(var i=0;i<this.data.independentVariable.length;i++){
			var dependdata = this.data.resDataMap[depend];
			independentList[i] = this.data.independentVariable[i].varietyName;
			var independentdata =this.data.resDataMap[independentList[i]];
			for(var j=0;j<independentdata.data.length;j++){
			dataAll.push([independentdata.data[j],dependdata.data[j]]);
			}
			depmax = dependdata.max;
			depmin = dependdata.min;
			indmax = independentdata.max;
			indmin = independentdata.min;
		}
		
		this.draw(dataAll,depmax,depmin,indmax,indmin);
	},
	draw:function (dataAll,depmax,depmin,indmax,indmin) {
		var _this = this;
		console.log(indmax)
		//画图
		option = {
		    title: {
		        text: _this.opt.ret_msg, //主标题文本
		        x: 'center', //标题文本的位置
		        y: 0
		    },
		    tooltip: {
		        formatter: '{a}: ({c})' //鼠标移动到点的提示框 字符串模板http://echarts.baidu.com/option.html#tooltip.formatter
		    },
		    xAxis: [
		        {min: indmin, max: indmax} //x轴的最大最小值
		    ],
		    yAxis: [
		        {min: depmin, max: depmax} //y轴的最大最小值
		    ],
		    series: [
		        {
		            name: '点', //系列名称，用于tooltip的显示
		            type: 'scatter', //设置绘制的为散点图，默认为直线
		            data: dataAll,  //设置每一个散点的位置
		            markLine: null //图表标线。
		            //TODO 画线的再添加
		        }
		    ]
		};

		this.render(option);
	},
	render:function (option) {
		//渲染到页面
		var myChart = echarts.init(document.getElementById(this.content)); //这里dom选择需要为js对象
		myChart.setOption(option);
	}
}

Scatter.init(data,opt,"main");

</script>
</body>
</html>