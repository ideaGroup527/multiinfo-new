<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>丁氏图</title>
    <style>
        html, body {
            margin: 0;
            width: 100%;
            height: 100%;
        }

        #canvas {
            display: block;
            margin: 100px auto;
        }
    </style>
</head>
<body>
<canvas id="canvas" width="1200" height="1200"></canvas>
<script>
    var data = {
        "ret_code": "0",
        "ret_msg": "",
        "ret_err": "",
        "resData": [
            [
                0.011355778367717501,
                0.14937420601543022,
                0.5050625842461012,
                0.07984288785169533,
                0.09601215650604497,
                0.3290419829762969,
                0.0762816807157767,
                0.041222235046644816,
                0.06277013389284389,
                0.418281877053767,
                0.34629141303511163,
                0.04462303456231138,
                0.40099248356686046,
                0.10184257038035868
            ],
            [
                0.00869290724448841,
                0.15402091874114132,
                0.49161386493781384,
                0.08094577999452073,
                0.09546473139556932,
                0.3384567347694733,
                0.07690158569865889,
                0.037342059029836235,
                0.06275611181732973,
                0.4234246450624689,
                0.351400372147768,
                0.0445654589150114,
                0.4090605827179359,
                0.10127836391250192
            ],
            [
                0.006069035339330391,
                0.15803158109490045,
                0.48125726459037893,
                0.08201682243400282,
                0.09477343384094163,
                0.3485862739145896,
                0.07732456617114344,
                0.034535725764590935,
                0.06264121696156563,
                0.42850882192608014,
                0.3567560869652946,
                0.04504924616412073,
                0.41596641900703646,
                0.10103312632553516
            ],
            [
                0.003795458883181385,
                0.16120998659504812,
                0.4770896616694188,
                0.08305583053417993,
                0.09385819338023003,
                0.3598605970506659,
                0.07745608852098816,
                0.03309660127848363,
                0.06239941565499182,
                0.4337093604755965,
                0.3627107198114239,
                0.04620088220075846,
                0.4215069339068283,
                0.10145069080981857
            ],
            [
                0.001968804029180548,
                0.16347608529475932,
                0.4801897404917152,
                0.0840716873363074,
                0.09272224114275851,
                0.3723832234067279,
                0.07726915486761375,
                0.03317603577210368,
                0.062033282543514416,
                0.43907853320320006,
                0.369290653113533,
                0.04804904714426379,
                0.4260932911882656,
                0.10257799592976372
            ],
            [
                0.0006226950374103446,
                0.16501699548337112,
                0.4893263894967951,
                0.08508734924491973,
                0.09141102834769517,
                0.3861095121103362,
                0.07687215677792085,
                0.034416512478840165,
                0.061548531084384614,
                0.44445857893741786,
                0.3763074351003361,
                0.050476907461277816,
                0.4306487527188292,
                0.10432182103996532
            ],
            [
                0,
                0.16623144877710216,
                0.5024256134452371,
                0.08613415308568985,
                0.08994378790768627,
                0.40112595485185465,
                0.07645793625604975,
                0.03603814961280158,
                0.060941335210179665,
                0.4495629016359315,
                0.3836209475922306,
                0.05331164389192,
                0.4364180931201292,
                0.1066875205833043
            ],
            [
                0.0003383813007215976,
                0.16763896974114773,
                0.5164071921381564,
                0.08724940558037646,
                0.0883583189070544,
                0.41747148930402694,
                0.07626551481159963,
                0.03710573525678424,
                0.06019415450456484,
                0.45401225903400555,
                0.39104918056148696,
                0.05631326045901733,
                0.44426142876084646,
                0.10964940964603813
            ],
            [
                0.0016475682289862443,
                0.16960351688566228,
                0.5290362508684199,
                0.08846325367845606,
                0.08669615417956338,
                0.4351318369525172,
                0.07643908287287901,
                0.03713140991297366,
                0.05929159237986969,
                0.45754475527792077,
                0.39845669327284666,
                0.05930491694175179,
                0.45453793813124393,
                0.11316315508232098
            ],
            [
                0.00384551061505392,
                0.1722232344816888,
                0.5397855924208843,
                0.0897823853047534,
                0.0849722594956405,
                0.45409325267574063,
                0.07707557431962803,
                0.03572864845371058,
                0.058224068281208165,
                0.4601445116750108,
                0.40589920475645164,
                0.06224756283428507,
                0.46692073351920244,
                0.11728564528337417
            ],
            [
                0.006475429347948105,
                0.17542207302823254,
                0.5492705058793955,
                0.09121461671496789,
                0.08321693566806404,
                0.4742774918562852,
                0.07810290932402295,
                0.03337536054999965,
                0.056995910896119086,
                0.461906964502207,
                0.4133730222930641,
                0.0651755199103325,
                0.48068341602231324,
                0.12196665926769412
            ],
            [
                0.008884959417015184,
                0.17916460293580974,
                0.5577761101985849,
                0.09278911013344963,
                0.08150340111308729,
                0.49550845281716677,
                0.07930916683257815,
                0.03138694407869604,
                0.05563272307791859,
                0.4628361757506675,
                0.42062699994496167,
                0.06810328209286569,
                0.4946963007682444,
                0.12693334611452944
            ],
            [
                0.01059347802837409,
                0.18336133730845694,
                0.5659112937489762,
                0.09453777680886132,
                0.07990720271158679,
                0.5175794663722567,
                0.08041454130332906,
                0.03139944803630511,
                0.05419082905238999,
                0.4629616461439963,
                0.4273276441356168,
                0.07106454544484123,
                0.5080874136565688,
                0.1318343641044234
            ],
            [
                0.011476437968499186,
                0.18794459680876338,
                0.5740906258092446,
                0.09647969579055005,
                0.07847450971146831,
                0.5403235395520071,
                0.08127056490819509,
                0.034328830912277,
                0.0527534791230227,
                0.4623501728700185,
                0.43325478673860246,
                0.07408693355759678,
                0.5205067669648857,
                0.13644131855311104
            ],
            [
                0.011608739892403144,
                0.19291167344262847,
                0.5822920321244583,
                0.09861501068426237,
                0.07721551812082365,
                0.5637710757447322,
                0.08178408880464468,
                0.040646683724714576,
                0.051355282275028245,
                0.4610727792285566,
                0.43830585221980223,
                0.07716489709473721,
                0.5321138451336374,
                0.14064911056833596
            ],
            [
                0.011193832114453897,
                0.19828905221296167,
                0.5902092631799557,
                0.1009310841841957,
                0.07611004107453867,
                0.5878651660441019,
                0.08212433185131064,
                0.049598665995722234,
                0.05004242827141888,
                0.4592663009821135,
                0.4426060237610546,
                0.08026735566942458,
                0.5431285290777556,
                0.14456659330690322
            ],
            [
                0.010442979204717632,
                0.20405950043003093,
                0.5976514464218485,
                0.10341509434858524,
                0.07512912149933187,
                0.6122584076311696,
                0.0826995446739783,
                0.05931939034961559,
                0.04889856746026726,
                0.4571562812151146,
                0.446446287637536,
                0.08338678023745515,
                0.5539954221923179,
                0.14843769138894222
            ],
            [
                0.009633114590203926,
                0.21019493291259506,
                0.6043584092654042,
                0.10604882376257203,
                0.0742326933915768,
                0.6364900312066835,
                0.08402195871736726,
                0.06713885666354467,
                0.04799532833704696,
                0.45500851365156036,
                0.4502309555745315,
                0.08649253148678762,
                0.5650293903368496,
                0.15260133489428332
            ],
            [
                0.008976149066845454,
                0.2166498061235061,
                0.6101566759673267,
                0.10881323440702366,
                0.07338944044070828,
                0.6602381547445852,
                0.08639811070763297,
                0.07121227472907642,
                0.04734830238294403,
                0.4530587989292796,
                0.4542473621582013,
                0.08957159258214295,
                0.576302728747796,
                0.15728179497071912
            ],
            [
                0.00852661178857777,
                0.223476043798134,
                0.6151610490653953,
                0.11170974182431109,
                0.07257078510292118,
                0.6832960680285203,
                0.08998206909701885,
                0.07105019512761795,
                0.046979881837056224,
                0.45141746729276755,
                0.4587156755149725,
                0.0926276767578564,
                0.5876170153119672,
                0.1625757182864944
            ],
            [
                0.008254673790080415,
                0.23062270692623668,
                0.6195173089087017,
                0.11472384183391018,
                0.07177281925036515,
                0.7057961345277118,
                0.09456887771080576,
                0.06771959830750099,
                0.04683417329084301,
                0.4502184413593694,
                0.46358575672377944,
                0.0956631945389789,
                0.598723196632514,
                0.16838237566710698
            ],
            [
                0.008182870916198591,
                0.23782433002551934,
                0.6231639101767761,
                0.11780475954643313,
                0.07101482708345454,
                0.7281713871169904,
                0.09967832918602518,
                0.06275905573515923,
                0.04676451424562413,
                0.44974076761209364,
                0.46855968540332527,
                0.09865316878295399,
                0.6092638585183728,
                0.1744990983722482
            ],
            [
                0.008315962671715213,
                0.24473925450694467,
                0.6260309373855582,
                0.12089177024568236,
                0.07032423730001232,
                0.7510649333650573,
                0.10467174721705186,
                0.05796283916847252,
                0.046580596312952506,
                0.45030099414922625,
                0.4732031157119443,
                0.10155864130192302,
                0.6189926965970171,
                0.18064692197933388
            ],
            [
                0.00866088316273689,
                0.2511602777915974,
                0.6282089852467833,
                0.1239467978933943,
                0.06970351171285712,
                0.774955431744312,
                0.10915173366960951,
                0.05436714613798376,
                0.04617811043218474,
                0.45214485092029977,
                0.4772881658430431,
                0.10436455400747859,
                0.6278821385648727,
                0.18666205387548535
            ],
            [
                0.009200717683687661,
                0.2570747010283532,
                0.6294695154704383,
                0.12701005209894242,
                0.0692532974360643,
                0.7998089912982845,
                0.11298270420270222,
                0.052189836820603575,
                0.0455194113822992,
                0.4553274415022357,
                0.48060090426266927,
                0.10709330939627101,
                0.6360688150333867,
                0.19251665506074417
            ],
            [
                0.009953601588998946,
                0.26266572412114486,
                0.6301890212969481,
                0.13011006937591768,
                0.06893838028877172,
                0.8254669071605871,
                0.11641787677985137,
                0.05103386183887271,
                0.04467636358249882,
                0.45987482008070796,
                0.4834792147802038,
                0.10978039860310558,
                0.6436935416957946,
                0.19835935748404535
            ],
            [
                0.010993912398459952,
                0.2681822363459542,
                0.6317586731502176,
                0.1331964851370694,
                0.06849711059855407,
                0.8521133229300698,
                0.11991342531638172,
                0.05047981034889352,
                0.04378518734209095,
                0.46593916771812993,
                0.48687778840678236,
                0.11244637776501855,
                0.6509699218443408,
                0.20441787883112872
            ],
            [
                0.012408111029776726,
                0.2739665527752362,
                0.6359820771617367,
                0.13620363052545534,
                0.06760475473950373,
                0.8799461683573582,
                0.12407873054537533,
                0.04992632302435193,
                0.04302074317408417,
                0.47368025606644315,
                0.4920160841221961,
                0.11512630719957147,
                0.6580956390483778,
                0.2109906318458467
            ],
            [
                0.014228601094177555,
                0.28032685134369134,
                0.6440302356289788,
                0.13911886823527253,
                0.06611442454676543,
                0.9089893230268057,
                0.12931488332033633,
                0.04904936375297248,
                0.04249952611257606,
                0.4831702162412322,
                0.4996583306858308,
                0.11787929092952243,
                0.6651075384397549,
                0.21829109672980437
            ],
            [
                0.016471712616693474,
                0.2871436520691806,
                0.6564223448754339,
                0.14188338145525822,
                0.06388763279172749,
                0.9393780225225802,
                0.13573096246424446,
                0.04774337205259558,
                0.04223613265607057,
                0.49447358876856773,
                0.5100995353338085,
                0.12074453332401104,
                0.6720895678356033,
                0.22636850973937747
            ],
            [
                0.019055508260671983,
                0.29450820614685463,
                0.6725176770847902,
                0.144603417923651,
                0.061184695664871926,
                0.9707513650854535,
                0.14314520413064444,
                0.046415418930364084,
                0.04217474119890127,
                0.5074517735867559,
                0.522893084190583,
                0.12380218690539639,
                0.6793566751558656,
                0.23518417938309674
            ],
            [
                0.022125054106684368,
                0.30293744032671965,
                0.6895233795407062,
                0.14801435892414902,
                0.05857851265750027,
                1,
                0.15150661633077198,
                0.04535440136392587,
                0.042654590554423555,
                0.5217503170308628,
                0.5375126931695903,
                0.12731066203282027,
                0.6872821532843018,
                0.244861431908141
            ]
        ],
        "rowVarList": [
            {
                "position": "2",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1982",
                "varietyDes": null,
                "range": "B2:O2"
            },
            {
                "position": "3",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1983",
                "varietyDes": null,
                "range": "B3:O3"
            },
            {
                "position": "4",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1984",
                "varietyDes": null,
                "range": "B4:O4"
            },
            {
                "position": "5",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1985",
                "varietyDes": null,
                "range": "B5:O5"
            },
            {
                "position": "6",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1986",
                "varietyDes": null,
                "range": "B6:O6"
            },
            {
                "position": "7",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1987",
                "varietyDes": null,
                "range": "B7:O7"
            },
            {
                "position": "8",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1988",
                "varietyDes": null,
                "range": "B8:O8"
            },
            {
                "position": "9",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1989",
                "varietyDes": null,
                "range": "B9:O9"
            },
            {
                "position": "10",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1990",
                "varietyDes": null,
                "range": "B10:O10"
            },
            {
                "position": "11",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1991",
                "varietyDes": null,
                "range": "B11:O11"
            },
            {
                "position": "12",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1992",
                "varietyDes": null,
                "range": "B12:O12"
            },
            {
                "position": "13",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1993",
                "varietyDes": null,
                "range": "B13:O13"
            },
            {
                "position": "14",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1994",
                "varietyDes": null,
                "range": "B14:O14"
            },
            {
                "position": "15",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1995",
                "varietyDes": null,
                "range": "B15:O15"
            },
            {
                "position": "16",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1996",
                "varietyDes": null,
                "range": "B16:O16"
            },
            {
                "position": "17",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1997",
                "varietyDes": null,
                "range": "B17:O17"
            },
            {
                "position": "18",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1998",
                "varietyDes": null,
                "range": "B18:O18"
            },
            {
                "position": "19",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "1999",
                "varietyDes": null,
                "range": "B19:O19"
            },
            {
                "position": "20",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "2000",
                "varietyDes": null,
                "range": "B20:O20"
            },
            {
                "position": "21",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "2001",
                "varietyDes": null,
                "range": "B21:O21"
            },
            {
                "position": "22",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "2002",
                "varietyDes": null,
                "range": "B22:O22"
            },
            {
                "position": "23",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "2003",
                "varietyDes": null,
                "range": "B23:O23"
            },
            {
                "position": "24",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "2004",
                "varietyDes": null,
                "range": "B24:O24"
            },
            {
                "position": "25",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "2005",
                "varietyDes": null,
                "range": "B25:O25"
            },
            {
                "position": "26",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "2006",
                "varietyDes": null,
                "range": "B26:O26"
            },
            {
                "position": "27",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "2007",
                "varietyDes": null,
                "range": "B27:O27"
            },
            {
                "position": "28",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "2008",
                "varietyDes": null,
                "range": "B28:O28"
            },
            {
                "position": "29",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "2009",
                "varietyDes": null,
                "range": "B29:O29"
            },
            {
                "position": "30",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "2010",
                "varietyDes": null,
                "range": "B30:O30"
            },
            {
                "position": "31",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "2011",
                "varietyDes": null,
                "range": "B31:O31"
            },
            {
                "position": "32",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "2012",
                "varietyDes": null,
                "range": "B32:O32"
            },
            {
                "position": "33",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "2013",
                "varietyDes": null,
                "range": "B33:O33"
            }
        ],
        "colVarList": [
            {
                "position": "B",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "阿富汗",
                "varietyDes": null,
                "range": "B2:B33"
            },
            {
                "position": "C",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "中国",
                "varietyDes": null,
                "range": "C2:C33"
            },
            {
                "position": "D",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "法国",
                "varietyDes": null,
                "range": "D2:D33"
            },
            {
                "position": "E",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "印度",
                "varietyDes": null,
                "range": "E2:E33"
            },
            {
                "position": "F",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "伊拉克",
                "varietyDes": null,
                "range": "F2:F33"
            },
            {
                "position": "G",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "日本",
                "varietyDes": null,
                "range": "G2:G33"
            },
            {
                "position": "H",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "马来西亚",
                "varietyDes": null,
                "range": "H2:H33"
            },
            {
                "position": "I",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "沙特",
                "varietyDes": null,
                "range": "I2:I33"
            },
            {
                "position": "J",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "索马里",
                "varietyDes": null,
                "range": "J2:J33"
            },
            {
                "position": "K",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "美国",
                "varietyDes": null,
                "range": "K2:K33"
            },
            {
                "position": "L",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "澳大利亚",
                "varietyDes": null,
                "range": "L2:L33"
            },
            {
                "position": "M",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "利比亚",
                "varietyDes": null,
                "range": "M2:M33"
            },
            {
                "position": "N",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "葡萄牙",
                "varietyDes": null,
                "range": "N2:N33"
            },
            {
                "position": "O",
                "typeDes": "字符串型",
                "type": 0,
                "typeFormat": null,
                "varietyName": "巴西",
                "varietyDes": null,
                "range": "O2:O33"
            }
        ]
    }
</script>
<script>
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    var width = canvas.width,
            height = canvas.height;
    ctx.lineWidth = 1;
    ctx.strokeStyle = "#aaa";
    ctx.textAlign = 'center';
    //行数和列数
    var col = data.colVarList.length + 1,
            row = data.rowVarList.length + 1;
    //椭圆长半轴和短半轴
    var a = width / col / 2, b = height / row / 2;

    //横线
    for (var i = 0; i < row; i++) {
        var y = i * (height / row);
        ctx.beginPath();
        ctx.moveTo(width / col, y);
        ctx.lineTo(width, y);
        ctx.stroke();
    }
    //y轴
    for (var i = 0; i < (row - 1); i++) {
        var y = i * (height / row);

        ctx.fillText(data.rowVarList[i].varietyName, 50, y + height / row / 2);
    }


    //纵线
    for (var i = 1; i <= col; i++) {
        var x = i * width / col;
        ctx.beginPath();
        ctx.moveTo(x, 0);
        ctx.lineTo(x, height - height / row);
        ctx.stroke();
    }
    //x轴
    for (var i = 0; i < col - 1; i++) {
        var x = i * width / col;
        ctx.fillText(data.colVarList[i].varietyName, x + (width / col) * 3 / 2, height - 10);
    }

    //椭圆
    for (var i = 0; i < col - 1; i++) {
        for (var j = 0; j < row - 1; j++) {
            EllipseTwo(ctx, (i + 1) * (width / col) + a, j * (height / row) + b, a * data.resData[j][i], b);
        }
    }


    function EllipseTwo(context, x, y, a, b) {
        context.save();
        context.fillStyle = "#980707";
        var r = (a > b) ? a : b;
        var ratioX = a / r;
        var ratioY = b / r;
        context.scale(ratioX, ratioY);
        context.beginPath();
        context.arc(x / ratioX, y / ratioY, r, 0, 2 * Math.PI, false);
        context.closePath();
        context.fill();
        context.restore();
    }
</script>
</body>
</html>